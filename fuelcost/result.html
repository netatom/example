<!DOCTYPE html>
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;">
	<title>연료비 계산기</title>
	<link href="css/style.css" rel="stylesheet" type="text/css" />
<script>
var Request = function()
{
    this.getParameter = function( name )
    {
        var rtnval = '';
        var nowAddress = unescape(location.href);
        var parameters = (nowAddress.slice(nowAddress.indexOf('?')+1,nowAddress.length)).split('&');
        for(var i = 0 ; i < parameters.length ; i++)
        {
            var varName = parameters[i].split('=')[0];
            if(varName.toUpperCase() == name.toUpperCase())
            {
                rtnval = parameters[i].split('=')[1];
                break;
            }
        }
        document.write( rtnval );
    }
}
var request = new Request();

function getUrlParameter(sParam)
{
    var sPageURL = window.location.search.substring(1);
    var sURLVariables = sPageURL.split('&');
    for (var i = 0; i < sURLVariables.length; i++) 
    {
        var sParameterName = sURLVariables[i].split('=');
        if (sParameterName[0] == sParam) 
        {
            return sParameterName[1];
        }
    }
}         
var standard = getUrlParameter('average_work_stand');
var total_distance = getUrlParameter('average_work');
var run = getUrlParameter('running');
if (standard=='day'){
	total_distance=total_distance*365*run;
	standard="일";
} else if (standard=='month'){
	total_distance=total_distance*12*run;
	standard="월";
} else{
	total_distance=total_distance*1*run;
	standard="년";
}

var fuel_cost_1 = getUrlParameter('fuel1');
var gaskilometer_1 = getUrlParameter('gasmilage1');
var total_cost_1 = total_distance*fuel_cost_1/gaskilometer_1;
total_cost_1 = Math.round(total_cost_1)

var fuel_cost_2 = getUrlParameter('fuel2');
var gaskilometer_2 = getUrlParameter('gasmilage2');
var total_cost_2 = total_distance*fuel_cost_2/gaskilometer_2;
total_cost_2 = Math.round(total_cost_2)

 // 숫자에 3자리마다 콤마찍기(현금표시)
 function Format_comma(val1){
  var newValue = val1+""; //숫자를 문자열로 변환
  var len = newValue.length;  
  var ch="";
  var j=1;
  var formatValue="";
  newValue = newValue.replace(/\,/gi, ' '); // 콤마제거  
  // comma제거된 문자열 길이
  len = newValue.length;
  for(i=len ; i>0 ; i--){
   ch = newValue.substring(i-1,i);
   formatValue = ch + formatValue;
   if ((j%3) == 0 && i>1 ){
    formatValue=","+formatValue;
   }
   j++
  }
  return formatValue;
 }

var result
var conclusion;
if (total_cost_1>total_cost_2){
	result=total_cost_1-total_cost_2;
	conclusion="자동차 B가 A보다"+Format_comma(result)+"원 더 저렴합니다.";
} else if (total_cost_1<total_cost_2){
	result=total_cost_2-total_cost_1;
	conclusion="자동차 A가 B보다"+Format_comma(result)+"원 더 저렴합니다.";
} else{
	conclusion="자동차 A와 B의 연료비는 동일합니다.";
}

total_distance=Format_comma(total_distance);
total_cost_1=Format_comma(total_cost_1);
total_cost_2=Format_comma(total_cost_2);
</script>
</head>
<body>

	<header>
        <div class="logo">
            <a href="index.html">
                <img src="images/logo.png" alt="logo for free mobile website template - Design 6" />
            </a>
        </div>
		<div class="clear"></div>
    </header>
	
    <div class="content">
    <article>
    	<h2 class="underline">자동차 연료비 비교</h2>
		
			<form>
			    <div>
					<h4>연료가격</h4>
			         <label for="name">
						자동차 A <script>request.getParameter('fuel1');</script>
					 </label>
					 <label for="name">
						자동차 B <script>request.getParameter('fuel2');</script>
					 </label>
			    </div>
				
			    <div>
					<h4>연비</h4>
			         <label for="name">
						자동차 A <script>request.getParameter('gasmilage1');</script>
					 </label>
			         <label for="name">
						자동차 B <script>request.getParameter('gasmilage2');</script>
					 </label>
			    </div>
				
			    <div>
					<h4>평균주행거리</h4>
			         <label for="subject">
						 <script>document.write(standard)</script>
						&nbsp;
						<script>request.getParameter('average_work');</script>Km
					 </label>
			    </div>
				
				<div>
			        <h4>운행기간<script>request.getParameter('running');</script>년의 
					주행거리는 <script>document.write(total_distance)</script>Km 이고,<br/>
					자동차 A의 연료비는 <script>document.write(total_cost_1)</script>원<br/>
					자동차 B의 연료비는 <script>document.write(total_cost_2)</script>원<br/>
					<script>document.write(conclusion)</script></h4>
			    </div>

				<nav class="vertical menu">
				    <ul>
						<li><a href="#" onclick="javascript:window.history.back(-1); return false">Reset</a></li>
					</ul>
			    </nav>
				
			</form>
    </article>
    </div>
</body>
</html>
